apiVersion: fleet.cattle.io/v1alpha1
kind: GitRepo
metadata:
  name: rancher-apps
  namespace: fleet-local
  labels:
    app.kubernetes.io/managed-by: Helm
  annotations:
    meta.helm.sh/release-name: rancher-apps
    meta.helm.sh/release-namespace: weapps
spec:
  repo: https://github.com/FoeT/rancher-apps
  branch: main
  paths:
  - .
  helmRepoURLRegex: "https://charts.*"
  clientSecretName: foet-git
  forceSyncGeneration: 0
  # Force resources to be adopted
  correctDrift:
    enabled: true
  # Don't use a global targetNamespace to allow cluster-scoped resources
  # Each component will set its own namespace as needed
  targets:
  - clusterName: local